!function(a){"use strict";var b="eshop",c="/eshop";a.controller("upp.eshop.CatalogCtrl",["$scope","eShopService","appi","catalogFiltersService",function(a,c,d){d.ui.changeActualOption({moduleKey2Display:b,navbarKey:b}),a.infiniteScroll=!0,a.listProducts=c.listEshopProducts,a.filterByCategory=function(b){var c=b?{field:"category",key:b}:void 0;a.setFilter(c)}}]),a.controller("upp.eshop.ProductCtrl",["$scope","$routeParams","appi","eShopService","$injector","$sce",function(a,d,e,f,g,h){e.ui.changeActualOption({moduleKey2Display:b,navbarKey:b},c),e.ui.showPageLoadingMsg();var i=e.utils.getIdFromParams(d.info);f.getEshopProduct(i).then(function(b){b.product&&b.product.description&&(b.product.description=h.trustAsHtml(b.product.description)),a.product=b.product,a.currency=b.currency,a.loaded=!0,e.ui.hidePageLoadingMsg()},function(){e.ui.showNetworkError()}),a.add2cart=function(b){var c=g.get("cartService");c.add(b,a.currency)}}])}(upp),function(a){"use strict";a.directive("addToCartBtnTpl",[function(){var a=$UPP.PROPS.CONF.MODULES.ESHOP.ADD2CART_AVAILABLE,b=function(){return a?'<input type="submit" class="btn btn-large btn-primary btn-submit product-toCart"value="{{\'PRODUCTS.PRODUCT.TOCART.CONFIRM\'|i18n}}"ng-disabled="!product.isProductOrderOk() "/>':""};return{replace:!0,restrict:"E",template:b(),link:function(b,c){a||c.remove()}}}])}(upp),function(a){"use strict";a["ESHOP.KEY"]="eShop",a["ESHOP.NO-PRODUCTS"]="There is no product with selected criteria"}(translations.en),function(a){"use strict";a["ESHOP.KEY"]="Tienda",a["ESHOP.NO-PRODUCTS"]="No hay ningÃºn producto con el filtro actual"}(translations.es),function(a){"use strict";a.config(["$routeProvider",function(a){var b={resolve:a.ResolverFactory.moduleIsActivated("eshop").resolver};a.when("/eshop",{templateUrl:"templates/modules/eshop/eshop-catalog.html",resolve:b}).when("/eshop/:info",{templateUrl:"templates/modules/eshop/eshop-product.html",resolve:b,showAd:!0})}])}(upp),function(a){"use strict";a.service("eShopService",["productsDao",function(a){var b=$UPP.PROPS.URL_UPPLICATION_REST_SERVICE+"eshop",c=6,d=a.create(b),e=function(a){var b;return d.listProducts({pagination:{maxRows:a&&(b=a.pagination)&&(b=b.maxRows)?b:c,currentPage:a&&(b=a.pagination)&&(b=b.page)?b:1},filter:a&&a.filter,order:a&&a.order})},f=function(a){return d.getProduct(a)};return{listEshopProducts:e,getEshopProduct:f}}]),a.service("catalogFiltersService",["storage",function(a){var b=["category","subcategory","price","name"],c=function(b,c,d,e){a.set("filter_category",b),a.set("filter_subcategory",c),a.set("filter_price",d),a.set("filter_name",e)},d=function(){var c={};if("true"!==a.get("shouldLoadFilters"))return c;for(var d=0,e=b.length;e>d;d++)c[b[d]]=a.get("filter_"+b[d]);return c},e=function(){for(var c=0,d=b.length;d>c;c++)a.remove("filter_"+b[c])};return{set:c,get:d,clear:e}}])}(upp);